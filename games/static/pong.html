<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/games/static/iframe.css" />
    <script src="/games/static/iframe.js"></script>
    <script src="/games/logic/pong"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: dodgerblue;
        }

        .button {
            cursor: pointer;
        }

        .coming-soon {
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div id="scenes">
        <!-- Anything We Have In SVG is 600 x 400 and will get automatically scaled -->
        <!-- Home Scene -->
        <svg id="home" width="100%" height="100%" viewBox="0 0 600 400">
            <!-- Background -->
            <rect x="0" y="0" width="600" height="400"></rect>
            <!-- Text Says Pong -->
            <text x="150" y="100" font-size="50" textLength="300" font-stretch="ultra-expanded" fill="white">Pong</text>
            <!-- Play Button -->
            <g class="button" id="playButton">
                <rect stroke="white" stroke-width="5" fill="transparent" x="150" y="200" width="300" height="100"></rect>
                <polygon points="250,225 250,275 350,250" fill="white"></polygon>
            </g>
        </svg>
        <!-- Play Scene -->
        <svg class="hidden" id="play" width="100%" height="100%" viewBox="0 0 600 400">
            <!-- Background -->
            <rect x="0" y="0" width="100%" height="100%"></rect>
            <!-- Go Back -->
            <g class="button" id="backHome">
                <rect stroke="white" stroke-width="5" x="0" y="0" width="100" height="100"></rect>
                <text fill="white" x="0" y="75" font-size="50" textLength="100">Back</text>
            </g>
            <!-- Text Says Play -->
            <text x="25%" y="25%" font-size="50" textLength="50%" font-stretch="ultra-expanded" fill="white">Play</text>
            <!-- Play Local -->
            <g class="button" id="play-local">
                <rect stroke="white" x="25" y="200" width="250" height="100"></rect>
                <text x="50" y="275" textLength="200" font-size="50" fill="white">Play Local</text>
            </g>
            <!-- Play Online -->
            <g class="button coming-soon" id="play-online">
                <rect stroke="white" x="325" y="200" width="250" height="100"></rect>
                <text x="350" y="250" textLength="200" font-size="25" fill="white">Play Online</text>
                <text x="350" y="295" textLength="200" font-size="40" fill="white">Coming Soon</text>
            </g>
        </svg>
        <!-- Set-Up Scene -->
        <div id="set-up" class="hidden">
            <!-- Back Button -->
            <div id="back-to-play" class="button">
                Back
            </div>
            <h1>Set Up Game</h1>
            <table>
                <tr>
                    <th>Players</th>
                    <td id="players-display">2</td>
                    <td id="change-players"><i class="material-icons">edit</i></td>
                </tr>
                <tr>
                    <td>Map</td>
                </tr>
            </table>
        </div>
        <!-- Set Up Players -->
        <svg class="hidden" id="set-up-players" width="100%" height="100%" viewBox="0 0 600 400">
            <!-- Background -->
            <rect x="0" y="0" width="100%" height="100%"></rect>
            <!-- Cancel -->
            <g class="button" id="cancel-players">
                <rect stroke="white" stroke-width="5" x="0" y="0" width="100" height="100"></rect>
                <text fill="white" x="0" y="75" font-size="50" textLength="100">Cancel</text>
            </g>
            <!-- Text Says Play -->
            <text x="25%" y="25%" font-size="50" textLength="50%" font-stretch="ultra-expanded" fill="white">Set Up Players</text>
        </svg>
    </div>
    <script>
        //Game
        var game = new logic.Game();

        //Control the scenes
        const scene = new Scene("home", "play", "set-up", "set-up-players");
        const scenes = {
            display: document.getElementById("scenes"),
            home: {
                display: document.getElementById("home"),
                playButton: document.getElementById("playButton")
            },
            play: {
                display: document.getElementById("play"),
                back: document.getElementById("backHome"),
                local: document.getElementById("play-local")
            },
            setUp: {
                display: document.getElementById("set-up"),
                players: document.getElementById("change-players")
            }
        };

        //Go to play scene
        scenes.home.playButton.onclick = e => {
            scene.currentScene = "play";
        };

        //Go Back Home
        scenes.play.back.onclick = e => {
            scene.currentScene = "home";
        };

        //Go To Setup Screen
        scenes.play.local.onclick = e => {
            scene.currentScene = "set-up";
        };

        //Go To Setup Players Screen
        scenes.setUp.players.onclick = e => {
            scene.currentScene = "set-up-players";
        };

        maintainRatio(scenes.display, {
            width: 3,
            height: 2
        });

        //Scenes
        scene.on = scene => {
            if (scene == "home") {
                scenes.home.display.classList.remove("hidden");
            }
            else {
                scenes.home.display.classList.add("hidden");
            }
            if (scene == "play") {
                scenes.play.display.classList.remove("hidden");
                //Reset The Game
                game = new logic.Game();
            }
            else {
                scenes.play.display.classList.add("hidden");
            }
            if (scene == "set-up") {
                scenes.setUp.display.classList.remove("hidden");
            }
            else {
                scenes.setUp.display.classList.add("hidden");
            }
        };
    </script>
</body>
</html>